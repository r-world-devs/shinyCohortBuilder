<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="shinyCohortBuilder">
<title>Introduction to shinyCohortBuilder • shinyCohortBuilder</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to shinyCohortBuilder">
<meta property="og:description" content="shinyCohortBuilder">
<meta property="og:image" content="https://github.com/r-world-devs/shinyCohortBuilder/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">shinyCohortBuilder</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9038</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/shinyCohortBuilder.html">
    <span class="fa fa fa fa-thumbs-o-up"></span>
     
    Get started
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--articles">
    <span class="fa fa fa fa-thumbs-o-up"></span>
     
    Articles
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--articles">
    <a class="dropdown-item" href="../articles/package-options.html">shinyCohortBuilder options</a>
    <a class="dropdown-item" href="../articles/updating-source.html">Updating Source in Shiny</a>
    <a class="dropdown-item" href="../articles/gui-filter-layer.html">Implementing custom GUI filter layer</a>
    <a class="dropdown-item" href="../articles/custom-gui-layer.html">Creating custom source extension</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fa fa fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://github.com/r-world-devs/shinyCohortBuilder/issues">
    <span class="fa fa fa fa-ambulance"></span>
     
    Issues
  </a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to shinyCohortBuilder</h1>
            
      
      
      <div class="d-none name"><code>shinyCohortBuilder.Rmd</code></div>
    </div>

    
    
<p>This document presents to you the functionality offered by <code>shinyCohortBuilder</code> package. You’ll learn here how to apply <code>cohortBuilder</code> into your Shiny application and how filters configuration affects the resulting GUI. Later on, we’ll present what <code>cohortBuilder</code> features can be used in Shiny and what steps can you make to automate cohort configuration.</p>
<div class="section level2">
<h2 id="shinycohortbuilder-vs--cohortbuilder">shinyCohortBuilder vs. cohortBuilder<a class="anchor" aria-label="anchor" href="#shinycohortbuilder-vs--cohortbuilder"></a>
</h2>
<p>When creating <code>cohortBuilder</code> our main goal was to easily allow using its features in Shiny.</p>
<p>With the approach taken in <code>cohortBuilder</code>:</p>
<ul>
<li>keeping Cohort objects as an R6 class,</li>
<li>introduced hooks system</li>
</ul>
<p>we were able to fully separate <code>cohortBuilder</code> as an operating backend, but also enabled to implement its features to a GUI named <code>shinyCohortBuilder</code>.</p>
<p>The rule of using <code>cohortBuilder</code> and <code>shinyCohortBuilder</code> is simple. With <code>cohortBuilder</code> you create Source and configure Cohort with filtering steps - with <code>shinyCohortBuilder</code> you generate filtering panel in Shiny based on the Cohort.</p>
</div>
<div class="section level2">
<h2 id="cohort-to-filtering-panel">Cohort to Filtering Panel<a class="anchor" aria-label="anchor" href="#cohort-to-filtering-panel"></a>
</h2>
<p>When you configure Cohort with the filters you want to see in the panel, use <code>cb_ui</code> and <code>cb_server</code> to place the panel in application UI and run it’s server logic:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-world-devs/cohortBuilder/" class="external-link">cohortBuilder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">shinyCohortBuilder</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="../reference/cb_ui.html">cb_ui</a></span><span class="op">(</span><span class="st">"panel_id"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">source_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/set_source.html" class="external-link">set_source</a></span><span class="op">(</span><span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/tblist.html" class="external-link">tblist</a></span><span class="op">(</span>iris <span class="op">=</span> <span class="va">iris</span><span class="op">)</span><span class="op">)</span>
  <span class="va">cohort_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/create-cohort.html" class="external-link">cohort</a></span><span class="op">(</span>
    <span class="va">source_obj</span>,
    <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="st">"discrete"</span>, id <span class="op">=</span> <span class="st">"species"</span>, dataset <span class="op">=</span> <span class="st">"iris"</span>, variable <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span>,
    <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="st">"range"</span>, id <span class="op">=</span> <span class="st">"petal_length"</span>, dataset <span class="op">=</span> <span class="st">"iris"</span>, variable <span class="op">=</span> <span class="st">"Petal.Length"</span><span class="op">)</span>
  <span class="op">)</span>
  <span class="fu"><a href="../reference/cb_ui.html">cb_server</a></span><span class="op">(</span><span class="st">"panel_id"</span>, <span class="va">cohort_obj</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="filter-vs-filter-controller">Filter vs Filter Controller<a class="anchor" aria-label="anchor" href="#filter-vs-filter-controller"></a>
</h2>
<p>Now let’s highlight how filter parameters affect filter controller in GUI.</p>
<ol style="list-style-type: decimal">
<li>Filter value as default selection.</li>
</ol>
<p>When you precise filter value parameter (e.g. <code>value</code> for “discrete” or <code>range</code> for range filter) the value is taken as a initial selection in filter controller.</p>
<p><img src="03.png"></p>
<p>If you skip providing value (or set is to <code>NA</code>) the initial selection is calculated automatically:</p>
<ul>
<li>for discrete and multi_discrete filter all the options are chosen,</li>
<li>for range, date_range filters the whole available range is selected,</li>
<li>for discrete_text filter all the available (comma separated) options are chosen.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Inactive filter is collapsed.</li>
</ol>
<p>Whenever you define filter, the one will be enrolled and ready to use by default:</p>
<p><img src="04.png"></p>
<p>If you want provide the selected filter as the optional one in Shiny, you may set <code>active = FALSE</code> in filter configuration. In GUI, the filter will be collapsed and skipped while computing Cohort data.</p>
<p>From UX (and performance) perspective it’s worth to always collapse all the filters initially.</p>
<p>You may achieve this by setting <code>options("cb_active_filter" = FALSE)</code> before you create filters.</p>
<ol start="3" style="list-style-type: decimal">
<li>Dropdown or checkbox group for discrete filter</li>
</ol>
<p>By default, discrete filters are transformed for checkbox group input controller. When having multiple options to choose, the approach may become inconvenient.</p>
<p>You may switch from checkbox group to search dropdown (<code><a href="https://dreamrs.github.io/shinyWidgets/reference/virtualSelectInput.html" class="external-link">shinyWidgets::virtualSelectInput</a></code>) with providing <code>gui_input = "vs"</code> parameter to discrete filter.</p>
<p><img src="doc_02.gif"></p>
<ol start="4" style="list-style-type: decimal">
<li>Slider or numeric input for range filter</li>
</ol>
<p>For range filters the default input in GUI is connection of slider and numeric range input. You can choose which input to use by providing selected <code>gui_input</code> parameter:</p>
<ul>
<li>
<code>gui_input = "numeric"</code> - numeric range only,</li>
<li>
<code>gui_input = "slider"</code> - slider only,</li>
<li>
<code>gui_input = c("slider", "numeric")</code> or skipped - both options.</li>
</ul>
<p><img src="05.png"></p>
<ol start="5" style="list-style-type: decimal">
<li>Mapping for discrete filter options</li>
</ol>
<p>It may happen some of the columns are storing key, not readable values to the users. In this case we’d like to replace keys with understandable labels in the input controller.</p>
<p>To achieve the goal you need to create the mapping function taking keys vector as an argument and cohort and returning labels. The function should be then added to Source while its creation using <code>value_mappings</code> argument.</p>
<p>Then pass the function name (as a character) to <code>value_mapping</code> parameter of the filter.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-world-devs/cohortBuilder/" class="external-link">cohortBuilder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">shinyCohortBuilder</span><span class="op">)</span>

<span class="va">program_vm</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">programs</span>, <span class="va">cohort</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"standard"</span> <span class="op">=</span> <span class="st">"Standard"</span>, 
    <span class="st">"premium"</span> <span class="op">=</span> <span class="st">"Premium"</span>, 
    <span class="st">"vip"</span> <span class="op">=</span> <span class="st">"VIP"</span>
  <span class="op">)</span><span class="op">[</span><span class="va">programs</span><span class="op">]</span>
<span class="op">}</span>

<span class="va">librarian_source</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/set_source.html" class="external-link">set_source</a></span><span class="op">(</span>
  <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/tblist.html" class="external-link">as.tblist</a></span><span class="op">(</span><span class="va">librarian</span><span class="op">)</span>,
  value_mappings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>program_vm <span class="op">=</span> <span class="va">program_vm</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">librarian_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/create-cohort.html" class="external-link">cohort</a></span><span class="op">(</span>
  <span class="va">librarian_source</span>,
  <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span>
    <span class="st">"discrete"</span>, 
    id <span class="op">=</span> <span class="st">"program"</span>, 
    dataset <span class="op">=</span> <span class="st">"borrowers"</span>, 
    variable <span class="op">=</span> <span class="st">"program"</span>,
    value_mapping <span class="op">=</span> <span class="st">"program_vm"</span>,
    gui_input <span class="op">=</span> <span class="st">"vs"</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/gui.html">gui</a></span><span class="op">(</span><span class="va">librarian_cohort</span><span class="op">)</span></code></pre></div>
<p><img src="06.png"></p>
</div>
<div class="section level2">
<h2 id="automatic-filters-configuration">Automatic filters configuration<a class="anchor" aria-label="anchor" href="#automatic-filters-configuration"></a>
</h2>
<p>If you want to skip configuring filters for all of the tables and columns in the source, you may use <code><a href="../reference/autofilter.html">shinyCohortBuilder::autofilter</a></code> method.</p>
<p>The method applied on Source, will scan all the columns included in Source and automatically configure proper filters to them. The filters will be stored within a Source, so it’s enough to pass such object to Cohort:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iris_source</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/set_source.html" class="external-link">set_source</a></span><span class="op">(</span><span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/tblist.html" class="external-link">tblist</a></span><span class="op">(</span>iris <span class="op">=</span> <span class="va">iris</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/autofilter.html">autofilter</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">iris_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/create-cohort.html" class="external-link">cohort</a></span><span class="op">(</span><span class="va">iris_source</span><span class="op">)</span>

<span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/sum_up.html" class="external-link">sum_up</a></span><span class="op">(</span><span class="va">iris_cohort</span><span class="op">)</span>
<span class="co">#&gt; &gt;&gt; Step ID: 1</span>
<span class="co">#&gt; -&gt; Filter ID: OSNCJ1654088869668</span>
<span class="co">#&gt;    Filter Type: range</span>
<span class="co">#&gt;    Filter Parameters:</span>
<span class="co">#&gt;      dataset: iris</span>
<span class="co">#&gt;      variable: Sepal.Length</span>
<span class="co">#&gt;      range: NA</span>
<span class="co">#&gt;      keep_na: TRUE</span>
<span class="co">#&gt;      description: </span>
<span class="co">#&gt;      active: TRUE</span>
<span class="co">#&gt; -&gt; Filter ID: RVKET1654088869668</span>
<span class="co">#&gt;    Filter Type: range</span>
<span class="co">#&gt;    Filter Parameters:</span>
<span class="co">#&gt;      dataset: iris</span>
<span class="co">#&gt;      variable: Sepal.Width</span>
<span class="co">#&gt;      range: NA</span>
<span class="co">#&gt;      keep_na: TRUE</span>
<span class="co">#&gt;      description: </span>
<span class="co">#&gt;      active: TRUE</span>
<span class="co">#&gt; -&gt; Filter ID: NVYZE1654088869668</span>
<span class="co">#&gt;    Filter Type: range</span>
<span class="co">#&gt;    Filter Parameters:</span>
<span class="co">#&gt;      dataset: iris</span>
<span class="co">#&gt;      variable: Petal.Length</span>
<span class="co">#&gt;      range: NA</span>
<span class="co">#&gt;      keep_na: TRUE</span>
<span class="co">#&gt;      description: </span>
<span class="co">#&gt;      active: TRUE</span>
<span class="co">#&gt; -&gt; Filter ID: SYYIC1654088869668</span>
<span class="co">#&gt;    Filter Type: range</span>
<span class="co">#&gt;    Filter Parameters:</span>
<span class="co">#&gt;      dataset: iris</span>
<span class="co">#&gt;      variable: Petal.Width</span>
<span class="co">#&gt;      range: NA</span>
<span class="co">#&gt;      keep_na: TRUE</span>
<span class="co">#&gt;      description: </span>
<span class="co">#&gt;      active: TRUE</span>
<span class="co">#&gt; -&gt; Filter ID: HZGJI1654088869669</span>
<span class="co">#&gt;    Filter Type: discrete</span>
<span class="co">#&gt;    Filter Parameters:</span>
<span class="co">#&gt;      dataset: iris</span>
<span class="co">#&gt;      variable: Species</span>
<span class="co">#&gt;      value: NA</span>
<span class="co">#&gt;      keep_na: TRUE</span>
<span class="co">#&gt;      description: </span>
<span class="co">#&gt;      active: TRUE</span></code></pre></div>
<p>The <code>autofilter</code> method checks column type and count of levels to apply the proper filter:</p>
<ul>
<li>numeric or integer class - range filter,</li>
<li>factor or character with levels count equal to column length (usually primary keys) - discrete_text filter,</li>
<li>factor or character with less than 4 levels, or logical column - discrete filter with checkbox group input,</li>
<li>factor or character with more than 4 levels and more - discrete filter with virtual select input.</li>
</ul>
<p>Providing custom rules will be added in the future releases of <code>shinyCohortBuilder</code>.</p>
<p><strong>Note.</strong> You can use <code>autofilter</code> to attach the generated filters configuration to Source as <code>available_filters</code> attribute. Just use <code>autofilter(..., attach_as = "meta")</code>. See <a href="#multiple-steps-filtering">Multiple-steps filters</a>.</p>
</div>
<div class="section level2">
<h2 id="cohortbuilder-to-gui-features">cohortBuilder to GUI features<a class="anchor" aria-label="anchor" href="#cohortbuilder-to-gui-features"></a>
</h2>
<p>Now we’re gonna highlight what features available in <code>cohortBuilder</code> can be also enabled in GUI panel.</p>
<div class="section level3">
<h3 id="multiple-steps-filtering">Multiple-steps filtering<a class="anchor" aria-label="anchor" href="#multiple-steps-filtering"></a>
</h3>
<p>Available with <code>cb_ui(..., steps = TRUE)</code>.</p>
<p>The options adds <code>Add Step</code> button to filtering panel and attaches <code>Delete</code> buttons to each filtering step. With the functionality you can perform filtering operations in multiple steps.</p>
<p>By default - newly added filtering step is replicated based on the last available step in the Cohort (with choices and statistics related to the previous step).</p>
<p><img src="doc_03_a.gif"></p>
<p>The second option allows users to configure newly added steps.</p>
<p>In order to enable this option:</p>
<ol style="list-style-type: decimal">
<li>Attach list of available filters as <code>available_filters</code> argument while creating source:</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/set_source.html" class="external-link">set_source</a></span><span class="op">(</span>
  <span class="va">...</span>, 
  available_filters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="st">"discrete"</span>, <span class="va">...</span><span class="op">)</span>,
    <span class="fu"><a href="https://r-world-devs.github.io/cohortBuilder/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="st">"range"</span>, <span class="va">...</span><span class="op">)</span>,
    <span class="va">...</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Specify <code>cb_ui(..., new_step = "configure")</code> or <code>gui(..., new_step = "configure")</code> to enable configuration panel.</li>
</ol>
<p>The available filters can be then chosen in step configuration panel.</p>
<p><img src="doc_03_b.gif"></p>
</div>
<div class="section level3">
<h3 id="reproducible-code">Reproducible code<a class="anchor" aria-label="anchor" href="#reproducible-code"></a>
</h3>
<p>Available with <code>cb_ui(..., code = TRUE)</code>.</p>
<p>The option adds <code>Reproducible Code</code> button to filtering panel. When the button is clicked a modal shows up presenting reproducible code for source data filtering.</p>
<p><img src="doc_04.gif"></p>
</div>
<div class="section level3">
<h3 id="saving-and-restoring-cohort-state">Saving and restoring Cohort state<a class="anchor" aria-label="anchor" href="#saving-and-restoring-cohort-state"></a>
</h3>
<p>Available with <code>cb_ui(..., state = TRUE)</code>.</p>
<p>Provides <code>Get State</code> and <code>Save State</code> buttons to the filtering panel. Get State opens a modal with Cohort configuration state in JSON format. Such JSON state can be then used to restore filtering panel state using <code>Save State</code> Button.</p>
<p><img src="doc_05.gif"></p>
</div>
<div class="section level3">
<h3 id="display-attrition-plot">Display attrition plot<a class="anchor" aria-label="anchor" href="#display-attrition-plot"></a>
</h3>
<p>Available with <code>cb_ui(..., attrition = TRUE)</code>.</p>
<p>The option adds <code>Show Attrition</code> button to the filtering panel. When clicked, the modal shows data attrition plot across all the filtering steps with a handy summary. When custom attrition is defined (<code>.custom_attrition</code> method) for the used source, the modal shows up the custom attrition plot in the modal tabset.</p>
<p>See more at <a href="custom-gui-layer.html">custom gui layer</a>.</p>
<p><img src="doc_06.gif"></p>
</div>
</div>
<div class="section level2">
<h2 id="extra-features">Extra features<a class="anchor" aria-label="anchor" href="#extra-features"></a>
</h2>
<div class="section level3">
<h3 id="run-button">Run button<a class="anchor" aria-label="anchor" href="#run-button"></a>
</h3>
<p>Available with <code>cb_server(..., run_button = TRUE)</code>.</p>
<p>When the option is enabled a “play” button is displayed at each filtering step panel. More to that, no data operation will be run until the button is clicked.</p>
<p>With <code>shinyCohortBuilder</code> each user action (changes in filters selection) triggers data calculation with respect to selected options. When run button is enabled, the users can specify filters setup first and then run calculations on request.</p>
<p>The option is especially useful when working with large datasets or remote data connections (i.e. using “db” source with cohortBuilder.db).</p>
<p><img src="doc_07.gif"></p>
</div>
<div class="section level3">
<h3 id="bookmarking">Bookmarking<a class="anchor" aria-label="anchor" href="#bookmarking"></a>
</h3>
<p>Available with <code>cb_server(..., enable_bookmarking = TRUE)</code>.</p>
<p>If you use bookmarking in your Shiny application this option may be especially useful. When turned on, the filtering panel is integrated with native shiny bookmarking so you can use it to restore application state along with all the application inputs (outside the filtering panel).</p>
</div>
<div class="section level3">
<h3 id="visibility-of-data-statistics">Visibility of data statistics<a class="anchor" aria-label="anchor" href="#visibility-of-data-statistics"></a>
</h3>
<p>Available with <code>cb_server(..., stats = c("pre", "post"))</code>.</p>
<p>Depending on the <code>stats</code> parameter you may choose which statistics should be visible in the filtering panel. There are four options:</p>
<ol style="list-style-type: decimal">
<li><code>stats = c("pre", "post")</code></li>
</ol>
<p>Results with displaying number of table rows (or other statistic implemented in source layer) before and after filtering in step. More to that shows pre and post filtering statistics for discrete filter choices (counts for each choice).</p>
<ol start="2" style="list-style-type: decimal">
<li><code>stats = "pre"</code></li>
</ol>
<p>Same as above but only previous step statistics are shown.</p>
<ol start="3" style="list-style-type: decimal">
<li><code>stats = "post"</code></li>
</ol>
<p>Same as above for 1. but only current step statistics are shown (after filtering).</p>
<ol start="4" style="list-style-type: decimal">
<li><code>stats = NULL</code></li>
</ol>
<p>No statistics displayed at all.</p>
</div>
<div class="section level3">
<h3 id="feedback-plots">Feedback plots<a class="anchor" aria-label="anchor" href="#feedback-plots"></a>
</h3>
<p>Available with <code>cb_server(..., feedback = TRUE)</code>.</p>
<p>When enabled, feedback plots (usually displaying data distribution) are show at each filter.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Krystian Igras, Kamil Wais.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
